(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(275);var defineProperty=__webpack_require__(6),regenerator=__webpack_require__(23),regenerator_default=__webpack_require__.n(regenerator),asyncToGenerator=__webpack_require__(56),objectSpread=__webpack_require__(3),slicedToArray=__webpack_require__(11),redux=__webpack_require__(64),createActions=__webpack_require__(598),dist_es=(__webpack_require__(267),__webpack_require__(79)),lib=__webpack_require__(268),lib_default=__webpack_require__.n(lib),config={featureFlags:{},servers:{auth:{url:""},content:{url:""},oauth:{url:""},profile:{url:""}},stripe:{apiKey:""},lang:""};var _typeToReducer,classCallCheck=__webpack_require__(76),possibleConstructorReturn=__webpack_require__(279),getPrototypeOf=__webpack_require__(131),inherits=__webpack_require__(269),wrapNativeSuper=__webpack_require__(278),utils_APIError=function(_Error){function APIError(body,response){var _getPrototypeOf2,_this;Object(classCallCheck.a)(this,APIError);for(var _len=arguments.length,params=new Array(_len>2?_len-2:0),_key=2;_key<_len;_key++)params[_key-2]=arguments[_key];return(_this=Object(possibleConstructorReturn.a)(this,(_getPrototypeOf2=Object(getPrototypeOf.a)(APIError)).call.apply(_getPrototypeOf2,[this].concat(params)))).body=void 0,_this.response=void 0,_this.response=response,_this.body=body,_this.body&&_this.body.message&&(_this.message=_this.body.message),_this}return Object(inherits.a)(APIError,_Error),APIError}(Object(wrapNativeSuper.a)(Error)),apiFetch=function(){var _ref=Object(asyncToGenerator.a)(regenerator_default.a.mark(function _callee(method,accessToken,path){var options,response,body,_args=arguments;return regenerator_default.a.wrap(function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return options=_args.length>3&&void 0!==_args[3]?_args[3]:{},_context.next=3,fetch(path,Object(objectSpread.a)({mode:"cors",credentials:"omit",method:method},options,{headers:Object(objectSpread.a)({"Content-Type":"application/json",Authorization:"Bearer ".concat(accessToken)},options.headers||{})}));case 3:if(!((response=_context.sent).status>=400)){_context.next=15;break}return body={},_context.prev=6,_context.next=9,response.json();case 9:body=_context.sent,_context.next=14;break;case 12:_context.prev=12,_context.t0=_context.catch(6);case 14:throw new utils_APIError(body,response);case 15:return _context.abrupt("return",response.json());case 16:case"end":return _context.stop()}},_callee,null,[[6,12]])}));return function apiFetch(_x,_x2,_x3){return _ref.apply(this,arguments)}}(),apiGet=function apiGet(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];return apiFetch.apply(void 0,["GET"].concat(args))},apiPost=function apiPost(accessToken,path,body){return apiFetch("POST",accessToken,path,{body:JSON.stringify(body)})},utils_setStatic=function setStatic(newState){return function(state){return Object(objectSpread.a)({},state,newState)}},fetchDefault=function fetchDefault(defaultResult){return{error:null,loading:!1,result:defaultResult}},utils_fetchReducer=function fetchReducer(name){var _ref7;return _ref7={},Object(defineProperty.a)(_ref7,dist_es.a.Pending,function(state){return Object(objectSpread.a)({},state,Object(defineProperty.a)({},name,{error:null,loading:!0,result:null}))}),Object(defineProperty.a)(_ref7,dist_es.a.Fulfilled,function(state,_ref5){var payload=_ref5.payload;return Object(objectSpread.a)({},state,Object(defineProperty.a)({},name,{error:null,loading:!1,result:payload}))}),Object(defineProperty.a)(_ref7,dist_es.a.Rejected,function(state,_ref6){var payload=_ref6.payload;return Object(objectSpread.a)({},state,Object(defineProperty.a)({},name,{error:payload,loading:!1,result:null}))}),_ref7};__webpack_require__.d(__webpack_exports__,"b",function(){return selectors}),__webpack_require__.d(__webpack_exports__,"a",function(){return actions});var defaultState={api:{cancelSubscription:fetchDefault(!1),createSubscription:fetchDefault(!1),customer:fetchDefault({}),plans:fetchDefault([]),profile:fetchDefault({}),updatePayment:fetchDefault(!1),subscriptions:fetchDefault([]),token:fetchDefault({})}},selectors={profile:function profile(state){return state.api.profile},token:function token(state){return state.api.token},subscriptions:function subscriptions(state){return state.api.subscriptions},plans:function plans(state){return state.api.plans},customer:function customer(state){return state.api.customer},createSubscriptionStatus:function createSubscriptionStatus(state){return state.api.createSubscription},cancelSubscriptionStatus:function cancelSubscriptionStatus(state){return state.api.cancelSubscription},updatePaymentStatus:function updatePaymentStatus(state){return state.api.updatePayment},lastError:function lastError(state){return Object.entries(state.api).filter(function(_ref){var _ref2=Object(slicedToArray.a)(_ref,2),v=(_ref2[0],_ref2[1]);return v&&!!v.error}).map(function(_ref3){var _ref4=Object(slicedToArray.a)(_ref3,2);return[_ref4[0],_ref4[1].error]})[0]},isLoading:function isLoading(state){return Object.values(state.api).some(function(v){return v&&!!v.loading})},plansByProductId:function plansByProductId(state){return function(productId){var plans=selectors.plans(state).result||[];return productId?plans.filter(function(plan){return plan.product_id===productId}):plans}},customerSubscriptions:function customerSubscriptions(state){var customer=selectors.customer(state);return customer&&customer.result?customer.result.subscriptions:[]}},actions=Object(objectSpread.a)({},Object(createActions.a)({fetchProfile:function fetchProfile(accessToken){return apiGet(accessToken,"".concat(config.servers.profile.url,"/v1/profile"))},fetchPlans:function fetchPlans(accessToken){return apiGet(accessToken,"".concat(config.servers.auth.url,"/v1/oauth/subscriptions/plans"))},fetchSubscriptions:function fetchSubscriptions(accessToken){return apiGet(accessToken,"".concat(config.servers.auth.url,"/v1/oauth/subscriptions/active"))},fetchToken:function fetchToken(accessToken){return apiPost(accessToken,"".concat(config.servers.oauth.url,"/v1/introspect"),{token:accessToken})},fetchCustomer:function fetchCustomer(accessToken){return apiGet(accessToken,"".concat(config.servers.auth.url,"/v1/oauth/subscriptions/customer"))},createSubscription:function createSubscription(accessToken,params){return apiPost(accessToken,"".concat(config.servers.auth.url,"/v1/oauth/subscriptions/active"),params)},cancelSubscription:function cancelSubscription(accessToken,subscriptionId){return function apiDelete(){for(var _len3=arguments.length,args=new Array(_len3),_key3=0;_key3<_len3;_key3++)args[_key3]=arguments[_key3];return apiFetch.apply(void 0,["DELETE"].concat(args))}(accessToken,"".concat(config.servers.auth.url,"/v1/oauth/subscriptions/active/").concat(subscriptionId))},updatePayment:function updatePayment(accessToken,_ref5){var paymentToken=_ref5.paymentToken;return apiPost(accessToken,"".concat(config.servers.auth.url,"/v1/oauth/subscriptions/updatePayment"),{paymentToken:paymentToken})}},"updateApiData","resetCreateSubscription","resetCancelSubscription","resetUpdatePayment"),{fetchCustomerAndSubscriptions:function fetchCustomerAndSubscriptions(accessToken){return function(){var _ref6=Object(asyncToGenerator.a)(regenerator_default.a.mark(function _callee(dispatch,getState){return regenerator_default.a.wrap(function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,Promise.all([dispatch(actions.fetchCustomer(accessToken)),dispatch(actions.fetchSubscriptions(accessToken))]);case 2:case"end":return _context.stop()}},_callee)}));return function(_x,_x2){return _ref6.apply(this,arguments)}}()},fetchPlansAndSubscriptions:function fetchPlansAndSubscriptions(accessToken){return function(){var _ref7=Object(asyncToGenerator.a)(regenerator_default.a.mark(function _callee2(dispatch,getState){return regenerator_default.a.wrap(function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,Promise.all([dispatch(actions.fetchPlans(accessToken)),dispatch(actions.fetchCustomer(accessToken)),dispatch(actions.fetchSubscriptions(accessToken))]);case 2:case"end":return _context2.stop()}},_callee2)}));return function(_x3,_x4){return _ref7.apply(this,arguments)}}()},createSubscriptionAndRefresh:function createSubscriptionAndRefresh(accessToken,params){return function(){var _ref8=Object(asyncToGenerator.a)(regenerator_default.a.mark(function _callee3(dispatch,getState){return regenerator_default.a.wrap(function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,dispatch(actions.createSubscription(accessToken,params));case 2:return _context3.next=4,dispatch(actions.fetchCustomerAndSubscriptions(accessToken));case 4:case"end":return _context3.stop()}},_callee3)}));return function(_x5,_x6){return _ref8.apply(this,arguments)}}()},cancelSubscriptionAndRefresh:function cancelSubscriptionAndRefresh(accessToken,subscriptionId){return function(){var _ref9=Object(asyncToGenerator.a)(regenerator_default.a.mark(function _callee4(dispatch,getState){return regenerator_default.a.wrap(function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,dispatch(actions.cancelSubscription(accessToken,subscriptionId));case 2:return _context4.next=4,dispatch(actions.fetchCustomerAndSubscriptions(accessToken));case 4:case"end":return _context4.stop()}},_callee4)}));return function(_x7,_x8){return _ref9.apply(this,arguments)}}()},updatePaymentAndRefresh:function updatePaymentAndRefresh(accessToken,params){return function(){var _ref10=Object(asyncToGenerator.a)(regenerator_default.a.mark(function _callee5(dispatch,getState){return regenerator_default.a.wrap(function _callee5$(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return _context5.next=2,dispatch(actions.updatePayment(accessToken,params));case 2:return _context5.next=4,dispatch(actions.fetchCustomerAndSubscriptions(accessToken));case 4:setTimeout(function(){return dispatch(actions.resetUpdatePayment())},2e3);case 5:case"end":return _context5.stop()}},_callee5)}));return function(_x9,_x10){return _ref10.apply(this,arguments)}}()}});lib_default()((_typeToReducer={},Object(defineProperty.a)(_typeToReducer,actions.fetchProfile.toString(),utils_fetchReducer("profile")),Object(defineProperty.a)(_typeToReducer,actions.fetchPlans.toString(),utils_fetchReducer("plans")),Object(defineProperty.a)(_typeToReducer,actions.fetchSubscriptions.toString(),utils_fetchReducer("subscriptions")),Object(defineProperty.a)(_typeToReducer,actions.fetchToken.toString(),utils_fetchReducer("token")),Object(defineProperty.a)(_typeToReducer,actions.fetchCustomer.toString(),utils_fetchReducer("customer")),Object(defineProperty.a)(_typeToReducer,actions.createSubscription.toString(),utils_fetchReducer("createSubscription")),Object(defineProperty.a)(_typeToReducer,actions.cancelSubscription.toString(),utils_fetchReducer("cancelSubscription")),Object(defineProperty.a)(_typeToReducer,actions.updatePayment.toString(),utils_fetchReducer("updatePayment")),Object(defineProperty.a)(_typeToReducer,actions.updateApiData.toString(),function(state,_ref11){var payload=_ref11.payload;return Object(objectSpread.a)({},state,payload)}),Object(defineProperty.a)(_typeToReducer,actions.resetCreateSubscription.toString(),utils_setStatic({createSubscription:fetchDefault(!1)})),Object(defineProperty.a)(_typeToReducer,actions.resetCancelSubscription.toString(),utils_setStatic({cancelSubscription:fetchDefault(!1)})),Object(defineProperty.a)(_typeToReducer,actions.resetUpdatePayment.toString(),utils_setStatic({updatePayment:fetchDefault(!1)})),_typeToReducer),defaultState.api),"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||redux.d},129:function(module,__webpack_exports__,__webpack_require__){"use strict";var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react_dom__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(96);__webpack_require__(554);__webpack_exports__.a=Object(react__WEBPACK_IMPORTED_MODULE_0__.memo)(function Portal(_ref){var id=_ref.id,children=_ref.children,el=document.getElementById(id);return el||((el=document.createElement("div")).setAttribute("class","portal"),el.setAttribute("id",id),document.body.appendChild(el)),Object(react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function(){return function(){var el=document.getElementById(id);el&&1===el.children.length&&el.remove()}},[id]),Object(react_dom__WEBPACK_IMPORTED_MODULE_1__.createPortal)(children,el)})},130:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return DialogMessage});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_lib_hooks__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(52),_Portal__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__(578),__webpack_require__(129)),DialogMessage=function DialogMessage(_ref){var _ref$className=_ref.className,className=void 0===_ref$className?"":_ref$className,onDismiss=_ref.onDismiss,children=_ref.children,dialogInsideRef=Object(_lib_hooks__WEBPACK_IMPORTED_MODULE_1__.c)(onDismiss);return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Portal__WEBPACK_IMPORTED_MODULE_3__.a,{id:"dialogs"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{className:"dialog ".concat(className),ref:dialogInsideRef},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("button",{className:"dismiss",onClick:onDismiss},"❌"),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{className:"message"},children)))};__webpack_exports__.b=DialogMessage},133:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return Tooltip});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(132),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),Tooltip=function Tooltip(_ref){var children=_ref.children,parentRef=_ref.parentRef,_ref$id=_ref.id,id=void 0===_ref$id?"":_ref$id,_ref$showBelow=_ref.showBelow,showBelow=void 0===_ref$showBelow||_ref$showBelow,_ref$dismissible=_ref.dismissible,dismissible=void 0!==_ref$dismissible&&_ref$dismissible,_ref$onDismiss=_ref.onDismiss,onDismiss=void 0===_ref$onDismiss?function(){}:_ref$onDismiss,_ref$extraClassNames=_ref.extraClassNames,extraClassNames=void 0===_ref$extraClassNames?"":_ref$extraClassNames,_ref2=_ref.screenInfo||{clientHeight:1e3,clientWidth:1e3},clientHeight=_ref2.clientHeight,clientWidth=_ref2.clientWidth,doShowBelow=showBelow&&clientHeight>=480&&clientWidth>=520,tooltipRef=Object(react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);Object(react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function(){var tooltipEl=tooltipRef.current,parentEl=parentRef.current;tooltipEl&&parentEl&&(tooltipEl.style.top=doShowBelow?parentEl.offsetTop+parentEl.offsetHeight+4+"px":parentEl.offsetTop+(0-tooltipEl.offsetHeight-2)+"px")},[doShowBelow,tooltipRef,parentRef]);var asideClassNames=["tooltip",extraClassNames,doShowBelow?"tooltip-below fade-up-tt":"fade-down-tt"];return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("aside",{ref:tooltipRef,id:id,className:classnames__WEBPACK_IMPORTED_MODULE_1___default.a.apply(void 0,asideClassNames)},children,dismissible&&react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span",{"data-testid":"dismiss-button",onClick:onDismiss,className:"dismiss",tabIndex:2},"✕"))};__webpack_exports__.b=Tooltip},265:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return LoadingOverlay});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),react_redux__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(55),_store__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(10),LoadingOverlay=(__webpack_require__(584),function LoadingOverlay(_ref){return _ref.isLoading?react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{id:"loading-overlay"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("img",{alt:"Loading",src:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSI3M3B4IiBoZWlnaHQ9IjczcHgiIHZpZXdCb3g9IjAgMCA3MyA3MyIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4gICAgICAgIDxkZWZzPiAgICAgICAgPGxpbmVhckdyYWRpZW50IHgxPSI5My4wOTI4MDk2JSIgeTE9IjUyLjc3MzQzNzUlIiB4Mj0iNjguNTEzMzM5OCUiIHkyPSIxMTkuMzI2MDA3JSIgaWQ9ImxpbmVhckdyYWRpZW50LTEiPiAgICAgICAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiMwQTg0RkYiIHN0b3Atb3BhY2l0eT0iMCIgb2Zmc2V0PSIwJSI+PC9zdG9wPiAgICAgICAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiMwQTg0RkYiIG9mZnNldD0iNjkuMzY5ODE4MiUiPjwvc3RvcD4gICAgICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjMEE4NEZGIiBvZmZzZXQ9IjEwMCUiPjwvc3RvcD4gICAgICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjMjQ4NEM2IiBzdG9wLW9wYWNpdHk9IjAuMDA0Nzc3NjY5NTEiIG9mZnNldD0iMTAwJSI+PC9zdG9wPiAgICAgICAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiMyNDg0QzYiIHN0b3Atb3BhY2l0eT0iMCIgb2Zmc2V0PSIxMDAlIj48L3N0b3A+ICAgICAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iIzI0ODRDNiIgc3RvcC1vcGFjaXR5PSIwIiBvZmZzZXQ9IjEwMCUiPjwvc3RvcD4gICAgICAgIDwvbGluZWFyR3JhZGllbnQ+ICAgICAgICA8cmVjdCBpZD0icGF0aC0yIiB4PSIwIiB5PSIwIiB3aWR0aD0iNDgiIGhlaWdodD0iNjAiPjwvcmVjdD4gICAgPC9kZWZzPiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4gICAgICAgIDxnIGlkPSJTaGFwZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTUuMDAwMDAwLCAtMS4wMDAwMDApIj4gICAgICAgICAgICA8cGF0aCBkPSJNNDEuOCw3My44IEMyMS45LDczLjggNS44LDU3LjcgNS44LDM3LjggQzUuOCwxOC4xIDIxLjYsMi4yIDQxLjEsMS44IEM0MS4zLDEuOCA0MS40LDEuOCA0MS40LDEuOCBDNDEuNSwxLjggNDEuNywxLjggNDEuOCwxLjggQzQ0LjYsMi4yIDQ2LjgsNC41IDQ2LjgsNy4zIEM0Ni44LDEwLjEgNDQuNiwxMi41IDQxLjgsMTIuNyBDMjgsMTIuOCAxNi44LDI0IDE2LjgsMzcuOCBDMTYuOCw1MS42IDI4LDYyLjggNDEuOCw2Mi44IEM1NS42LDYyLjggNjYuOCw1MS42IDY2LjgsMzcuOCBMNzcuOCwzNy44IEM3Ny44LDU3LjcgNjEuNyw3My44IDQxLjgsNzMuOCBaIiBmaWxsPSJ1cmwoI2xpbmVhckdyYWRpZW50LTEpIj48L3BhdGg+ICAgICAgICAgICAgPG1hc2sgaWQ9Im1hc2stMyIgZmlsbD0id2hpdGUiPiAgICAgICAgICAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNwYXRoLTIiPjwvdXNlPiAgICAgICAgICAgIDwvbWFzaz4gICAgICAgICAgICA8ZyBpZD0iTWFzayI+PC9nPiAgICAgICAgICAgIDxwYXRoIGQ9Ik00MS44LDczLjggQzIxLjksNzMuOCA1LjgsNTcuNyA1LjgsMzcuOCBDNS44LDE4LjEgMjEuNiwyLjIgNDEuMSwxLjggQzQxLjMsMS44IDQxLjQsMS44IDQxLjQsMS44IEM0MS41LDEuOCA0MS43LDEuOCA0MS44LDEuOCBDNDQuNiwyLjIgNDYuOCw0LjUgNDYuOCw3LjMgQzQ2LjgsMTAuMSA0NC42LDEyLjUgNDEuOCwxMi43IEMyOCwxMi44IDE2LjgsMjQgMTYuOCwzNy44IEMxNi44LDUxLjYgMjgsNjIuOCA0MS44LDYyLjggQzU1LjYsNjIuOCA2Ni44LDUxLjYgNjYuOCwzNy44IEw3Ny44LDM3LjggQzc3LjgsNTcuNyA2MS43LDczLjggNDEuOCw3My44IFoiIGZpbGw9IiMwQTg0RkYiIG1hc2s9InVybCgjbWFzay0zKSI+PC9wYXRoPiAgICAgICAgPC9nPiAgICA8L2c+PC9zdmc+"})):null});Object(react_redux__WEBPACK_IMPORTED_MODULE_1__.a)(function(state){return{isLoading:_store__WEBPACK_IMPORTED_MODULE_2__.b.isLoading(state)}})(LoadingOverlay)},271:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return Profile});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),react_redux__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(55),_store__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(10),Profile=function Profile(_ref){var _ref$profile=_ref.profile,loading=_ref$profile.loading,error=_ref$profile.error,result=_ref$profile.result;return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",null,loading&&react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h1",null,"(profile loading...)"),error&&react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h1",null,"(profile error! ",""+error,")"),result&&react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{className:"profileCard"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("img",{"data-testid":"avatar",className:"avatar",alt:result.email,src:result.avatar,width:"64",height:"64"}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br",null),result.displayName&&react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span",{"data-testid":"displayName",className:"displayName"},result.displayName,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("br",null)),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span",{"data-testid":"email",className:"email"},result.email)))};Object(react_redux__WEBPACK_IMPORTED_MODULE_1__.a)(function(state){return{profile:_store__WEBPACK_IMPORTED_MODULE_2__.b.profile(state)}})(Profile)},272:function(module,__webpack_exports__,__webpack_require__){"use strict";var ScreenInfoOther,_home_circleci_project_packages_fxa_payments_server_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(76);!function(ScreenInfoOther){ScreenInfoOther.NOT_REPORTED_VALUE="none"}(ScreenInfoOther||(ScreenInfoOther={}));__webpack_exports__.a=function ScreenInfo(win){Object(_home_circleci_project_packages_fxa_payments_server_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,ScreenInfo),this.clientHeight=void 0,this.clientWidth=void 0,this.devicePixelRatio=void 0,this.screenHeight=void 0,this.screenWidth=void 0;var documentElement=win.document.documentElement||{},screen=win.screen||{};this.clientHeight=documentElement.clientHeight||ScreenInfoOther.NOT_REPORTED_VALUE,this.clientWidth=documentElement.clientWidth||ScreenInfoOther.NOT_REPORTED_VALUE,this.devicePixelRatio=win.devicePixelRatio||ScreenInfoOther.NOT_REPORTED_VALUE,this.screenHeight=screen.height||ScreenInfoOther.NOT_REPORTED_VALUE,this.screenWidth=screen.width||ScreenInfoOther.NOT_REPORTED_VALUE}},273:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return Product});var _home_circleci_project_packages_fxa_payments_server_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(11),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__),react_redux__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(55),react_stripe_elements__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(14),react_router_dom__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(180),_store__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(10),_lib_AppContext__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(75),_components_ProductValueProposition__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(80),_lib_hooks__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(52),Product=function Product(_ref){var productId=_ref.match.params.productId,plans=_ref.plans,createSubscriptionStatus=_ref.createSubscriptionStatus,subscriptions=_ref.subscriptions,plansByProductId=_ref.plansByProductId,createSubscription=_ref.createSubscription,resetCreateSubscription=_ref.resetCreateSubscription,fetchPlansAndSubscriptions=_ref.fetchPlansAndSubscriptions,_useContext=Object(react__WEBPACK_IMPORTED_MODULE_1__.useContext)(_lib_AppContext__WEBPACK_IMPORTED_MODULE_6__.a),accessToken=_useContext.accessToken,queryParams=_useContext.queryParams;if(Object(react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(function(){resetCreateSubscription()},[resetCreateSubscription]),Object(react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(function(){accessToken&&fetchPlansAndSubscriptions(accessToken)},[fetchPlansAndSubscriptions,accessToken]),plans.error)return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",null,"(plans error! ",""+plans.error,")");if(subscriptions.error)return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",null,"(subscriptions error! ",""+subscriptions.error,")");var planId=queryParams.plan,productPlans=plansByProductId(productId),selectedPlan=productPlans.filter(function(plan){return plan.plan_id===planId})[0];return selectedPlan||(selectedPlan=productPlans[0]),selectedPlan?createSubscriptionStatus.loading?react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",null,"Creating subscription..."):createSubscriptionStatus.error?react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",null,"Problem creating subscription:",""+createSubscriptionStatus.error):createSubscriptionStatus.result?react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h2",null,"TODO: Redirect to product goes here"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__.a,{to:"/subscriptions"},"Manage subscriptions")):(subscriptions.result||[]).some(function(subscription){return subscription.productName===productId})?react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h2",null,"TODO: Already have a subscription to the product. Redirect to product goes here?"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__.a,{to:"/subscriptions"},"Manage subscriptions")):react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h2",null,"Let's set up your subscription"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_components_ProductValueProposition__WEBPACK_IMPORTED_MODULE_7__.b,{plan:selectedPlan})),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_stripe_elements__WEBPACK_IMPORTED_MODULE_3__.Elements,null,react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(SubscriptionForm,{accessToken:accessToken,createSubscription:createSubscription,selectedPlan:selectedPlan}))):react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",null,"No plans available for this product.")},SubscriptionForm=Object(react_stripe_elements__WEBPACK_IMPORTED_MODULE_3__.injectStripe)(function SubscriptionFormRaw(_ref2){var accessToken=_ref2.accessToken,selectedPlan=_ref2.selectedPlan,createSubscription=_ref2.createSubscription,stripe=_ref2.stripe,_useCheckboxState=Object(_lib_hooks__WEBPACK_IMPORTED_MODULE_8__.b)(),_useCheckboxState2=Object(_home_circleci_project_packages_fxa_payments_server_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(_useCheckboxState,2),confirmationChecked=_useCheckboxState2[0],onConfirmationChanged=_useCheckboxState2[1],onSubmit=Object(react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(function(ev){ev.preventDefault();var data=new FormData(ev.target),name=String(data.get("name"));stripe&&stripe.createToken({name:name}).then(function(result){console.log("RESULT",result),createSubscription(accessToken,{paymentToken:result&&result.token&&result.token.id,planId:selectedPlan.plan_id})})},[accessToken,selectedPlan,createSubscription,stripe]);return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("form",{onSubmit:onSubmit},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h2",null,"Payment information"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("ul",null,react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("li",null,react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("input",{name:"name",placeholder:"Name"})),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("li",null,react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p",null,"Card details (e.g. 4242 4242 4242 4242)"),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_stripe_elements__WEBPACK_IMPORTED_MODULE_3__.CardElement,{style:{base:{fontSize:"18px"}}})),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("li",null,react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("label",null,react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("input",{type:"checkbox",defaultChecked:confirmationChecked,onChange:onConfirmationChanged})," ","I authorize Mozilla to charge this payment method")),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("li",null,react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button",{disabled:!confirmationChecked},"Submit"))))});Object(react_redux__WEBPACK_IMPORTED_MODULE_2__.a)(function(state){return{plans:_store__WEBPACK_IMPORTED_MODULE_5__.b.plans(state),subscriptions:_store__WEBPACK_IMPORTED_MODULE_5__.b.subscriptions(state),createSubscriptionStatus:_store__WEBPACK_IMPORTED_MODULE_5__.b.createSubscriptionStatus(state),plansByProductId:_store__WEBPACK_IMPORTED_MODULE_5__.b.plansByProductId(state)}},{createSubscription:_store__WEBPACK_IMPORTED_MODULE_5__.a.createSubscriptionAndRefresh,resetCreateSubscription:_store__WEBPACK_IMPORTED_MODULE_5__.a.resetCreateSubscription,fetchPlansAndSubscriptions:_store__WEBPACK_IMPORTED_MODULE_5__.a.fetchPlansAndSubscriptions})(Product)},276:function(module,__webpack_exports__,__webpack_require__){"use strict";var react=__webpack_require__(0),react_default=__webpack_require__.n(react),es=__webpack_require__(55),store=__webpack_require__(10),react_stripe_elements_es=__webpack_require__(14),AppContext=__webpack_require__(75),AlertBar=__webpack_require__(97),slicedToArray=__webpack_require__(11),hooks=__webpack_require__(52),Subscriptions_Subscription=function Subscription(_ref){var accessToken=_ref.accessToken,cancelSubscription=_ref.cancelSubscription,_ref$subscription=_ref.subscription,subscription_id=_ref$subscription.subscription_id,plan_id=_ref$subscription.plan_id,nickname=_ref$subscription.nickname,status=_ref$subscription.status,current_period_start=_ref$subscription.current_period_start,current_period_end=_ref$subscription.current_period_end,_useBooleanState=Object(hooks.a)(),_useBooleanState2=Object(slicedToArray.a)(_useBooleanState,3),cancelRevealed=_useBooleanState2[0],revealCancel=_useBooleanState2[1],hideCancel=_useBooleanState2[2],_useCheckboxState=Object(hooks.b)(),_useCheckboxState2=Object(slicedToArray.a)(_useCheckboxState,2),confirmationChecked=_useCheckboxState2[0],onConfirmationChanged=_useCheckboxState2[1],confirmCancellation=Object(react.useCallback)(function(){return cancelSubscription(accessToken,subscription_id)},[accessToken,cancelSubscription,subscription_id]);return react_default.a.createElement("div",{className:"subscription"},react_default.a.createElement("h3",null,nickname," (",status,")"),react_default.a.createElement("p",null,subscription_id," - ",plan_id," - ",current_period_start," - ",current_period_end),react_default.a.createElement("div",null,cancelRevealed?react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("h3",null,"Cancel subscription"),react_default.a.createElement("p",null,"Cancelling means you'll no longer be able to access the product..."),react_default.a.createElement("p",null,react_default.a.createElement("label",null,react_default.a.createElement("input",{type:"checkbox",defaultChecked:confirmationChecked,onChange:onConfirmationChanged}),"Cancel my access and my saved information")),react_default.a.createElement("p",null,react_default.a.createElement("button",{onClick:hideCancel},"No, Stay Subscribed"),react_default.a.createElement("button",{onClick:confirmCancellation,disabled:!confirmationChecked},"Yes, Cancel My Subscription"))):react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("h3",null,"Cancel subscription ",react_default.a.createElement("button",{onClick:revealCancel},"Cancel...")))))},Subscriptions_PaymentUpdateForm=Object(react_stripe_elements_es.injectStripe)(function PaymentUpdateForm(_ref){var accessToken=_ref.accessToken,updatePayment=_ref.updatePayment,updatePaymentStatus=_ref.updatePaymentStatus,resetUpdatePayment=_ref.resetUpdatePayment,customer=_ref.customer,stripe=_ref.stripe,_useBooleanState=Object(hooks.a)(),_useBooleanState2=Object(slicedToArray.a)(_useBooleanState,3),updateRevealed=_useBooleanState2[0],revealUpdate=_useBooleanState2[1],hideUpdate=_useBooleanState2[2];Object(react.useEffect)(function(){resetUpdatePayment()},[resetUpdatePayment]);var onSubmit=Object(react.useCallback)(function(ev){ev.preventDefault();var data=new FormData(ev.target),name=String(data.get("name"));stripe&&stripe.createToken({name:name}).then(function(result){hideUpdate(ev),updatePayment(accessToken,{paymentToken:result&&result.token&&result.token.id})})},[accessToken,updatePayment,hideUpdate,stripe]);if(customer.loading)return null;if(customer.error)return null;if(updatePaymentStatus.loading)return react_default.a.createElement("div",null,react_default.a.createElement("h3",null,"Billing information"),react_default.a.createElement("p",null,"Updating..."));if(updatePaymentStatus.error)return react_default.a.createElement("div",null,react_default.a.createElement("h3",null,"Billing information"),react_default.a.createElement("p",null,"Updating... Error! ",""+updatePaymentStatus.error));var _ref2=customer.result,payment_type=_ref2.payment_type,last4=_ref2.last4,exp_month=_ref2.exp_month,exp_year=_ref2.exp_year;return react_default.a.createElement("div",null,react_default.a.createElement("h3",null,"Billing information"),updateRevealed?react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("form",{onSubmit:onSubmit},react_default.a.createElement("ul",null,react_default.a.createElement("li",null,react_default.a.createElement("input",{name:"name",placeholder:"Name"})),react_default.a.createElement("li",null,react_default.a.createElement("p",null,"Card details (e.g. 4242 4242 4242 4242)"),react_default.a.createElement(react_stripe_elements_es.CardElement,{style:{base:{fontSize:"18px"}}})),react_default.a.createElement("li",null,react_default.a.createElement("button",{onClick:hideUpdate},"Cancel"),react_default.a.createElement("button",null,"Update"))))):react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("p",null,"[",payment_type,"] card ending ",last4," Expires ",exp_month," / ",exp_year),react_default.a.createElement("button",{onClick:revealUpdate},"Change...")))}),DialogMessage=__webpack_require__(130);__webpack_require__.d(__webpack_exports__,"a",function(){return Subscriptions_Subscriptions});var Subscriptions_Subscriptions=function Subscriptions(_ref){var customer=_ref.customer,subscriptions=_ref.subscriptions,customerSubscriptions=_ref.customerSubscriptions,fetchCustomerAndSubscriptions=_ref.fetchCustomerAndSubscriptions,cancelSubscription=_ref.cancelSubscription,updatePayment=_ref.updatePayment,resetUpdatePayment=_ref.resetUpdatePayment,resetCancelSubscription=_ref.resetCancelSubscription,updatePaymentStatus=_ref.updatePaymentStatus,accessToken=Object(react.useContext)(AppContext.a).accessToken;return Object(react.useEffect)(function(){resetCancelSubscription()},[resetCancelSubscription]),Object(react.useEffect)(function(){accessToken&&fetchCustomerAndSubscriptions(accessToken)},[fetchCustomerAndSubscriptions,accessToken]),subscriptions.loading?react_default.a.createElement("div",null,"(subscriptions loading...)"):subscriptions.error?react_default.a.createElement("div",null,"(subscriptions error! ",""+subscriptions.error,")"):subscriptions.result&&0!==subscriptions.result.length?react_default.a.createElement("div",null,updatePaymentStatus.loading&&react_default.a.createElement(AlertBar.b,{className:"alert alertPending"},react_default.a.createElement("span",null,"Updating billing information...")),updatePaymentStatus.error&&react_default.a.createElement(DialogMessage.b,{className:"error",onDismiss:resetUpdatePayment},react_default.a.createElement("p",null,"Updating billing information failed:",react_default.a.createElement("br",null),updatePaymentStatus.error.body.message)),updatePaymentStatus.result&&react_default.a.createElement(AlertBar.b,{className:"alert alertSuccess"},react_default.a.createElement("span",null,"Your billing information has been updated successfully!")),react_default.a.createElement("h2",null,"Subscriptions"),react_default.a.createElement(react_stripe_elements_es.Elements,null,react_default.a.createElement(Subscriptions_PaymentUpdateForm,{accessToken:accessToken,customer:customer,updatePayment:updatePayment,resetUpdatePayment:resetUpdatePayment,updatePaymentStatus:updatePaymentStatus})),customerSubscriptions.map(function(subscription,idx){return react_default.a.createElement(Subscriptions_Subscription,Object.assign({key:idx},{accessToken:accessToken,cancelSubscription:cancelSubscription,subscription:subscription}))})):react_default.a.createElement("div",null,react_default.a.createElement("h2",null,"Subscriptions"),react_default.a.createElement("div",null,"No subscriptions yet."))};Object(es.a)(function(state){return{customer:store.b.customer(state),customerSubscriptions:store.b.customerSubscriptions(state),subscriptions:store.b.subscriptions(state),updatePaymentStatus:store.b.updatePaymentStatus(state)}},{fetchCustomerAndSubscriptions:store.a.fetchCustomerAndSubscriptions,updatePayment:store.a.updatePaymentAndRefresh,resetUpdatePayment:store.a.resetUpdatePayment,resetCancelSubscription:store.a.resetCancelSubscription,cancelSubscription:store.a.cancelSubscriptionAndRefresh})(Subscriptions_Subscriptions)},277:function(module,__webpack_exports__,__webpack_require__){"use strict";var react=__webpack_require__(0),react_default=__webpack_require__.n(react),es=__webpack_require__(14),objectSpread=__webpack_require__(3),objectWithoutProperties=__webpack_require__(81),classnames=__webpack_require__(132),classnames_default=__webpack_require__.n(classnames),Tooltip=__webpack_require__(133),FormContext=react_default.a.createContext(null),fields_Form=function Form(props){var children=props.children,validator=props.validator,formProps=Object(objectWithoutProperties.a)(props,["children","validator"]);return react_default.a.createElement("form",formProps,react_default.a.createElement(FormContext.Provider,{value:{validator:validator}},children))},fields_FieldGroup=function FieldGroup(_ref){var children=_ref.children;return react_default.a.createElement("div",{className:"input-row-group"},children)},fields_Field=function Field(_ref2){var tooltipParentRef=_ref2.tooltipParentRef,fieldType=_ref2.fieldType,name=_ref2.name,_ref2$initialValue=_ref2.initialValue,initialValue=void 0===_ref2$initialValue?null:_ref2$initialValue,_ref2$tooltip=_ref2.tooltip,tooltip=void 0===_ref2$tooltip||_ref2$tooltip,_ref2$required=_ref2.required,required=void 0!==_ref2$required&&_ref2$required,label=_ref2.label,_ref2$className=_ref2.className,className=void 0===_ref2$className?"input-row":_ref2$className,children=_ref2.children,validator=Object(react.useContext)(FormContext).validator;return Object(react.useEffect)(function(){return validator.registerField({name:name,initialValue:initialValue,required:required,fieldType:fieldType})},[name,required,fieldType]),react_default.a.createElement("div",{className:className},react_default.a.createElement("label",null,label&&react_default.a.createElement("span",{className:"label-text"},label),children,tooltip&&tooltipParentRef&&validator.getError(name)&&react_default.a.createElement(Tooltip.b,{parentRef:tooltipParentRef},validator.getError(name))))},fields_Input=function Input(props){var name=props.name,label=props.label,initialValue=props.initialValue,onValidate=props.onValidate,_props$tooltip=props.tooltip,tooltip=void 0===_props$tooltip||_props$tooltip,_props$required=props.required,required=void 0!==_props$required&&_props$required,className=props.className,childProps=Object(objectWithoutProperties.a)(props,["name","label","initialValue","onValidate","tooltip","required","className"]),validator=Object(react.useContext)(FormContext).validator,onChange=Object(react.useCallback)(function(ev){var value=ev.target.value;if(onValidate){var _onValidate=onValidate(value),newValue=_onValidate.value,error=_onValidate.error;validator.updateField({name:name,value:newValue,error:error,valid:null===error})}else required&&null!==value&&!value?validator.updateField({name:name,value:value,error:"This field is required"}):validator.updateField({name:name,value:value,valid:!0})},[name,validator]),tooltipParentRef=Object(react.useRef)(null);return react_default.a.createElement(fields_Field,{fieldType:"input",tooltipParentRef:tooltipParentRef,name:name,initialValue:initialValue,tooltip:tooltip,required:required,label:label,className:className},react_default.a.createElement("input",Object(objectSpread.a)({},childProps,{ref:tooltipParentRef,name:name,required:required,className:classnames_default()({invalid:validator.isInvalid(name)}),value:validator.getValue(name,""),onChange:onChange,onBlur:onChange})))},fields_StripeElement=function StripeElement(props){var StripeElementComponent=props.component,name=props.name,_props$tooltip2=props.tooltip,tooltip=void 0===_props$tooltip2||_props$tooltip2,_props$required2=props.required,required=void 0!==_props$required2&&_props$required2,label=props.label,className=props.className,childProps=Object(objectWithoutProperties.a)(props,["component","name","tooltip","required","label","className"]),validator=Object(react.useContext)(FormContext).validator,onChange=Object(react.useCallback)(function(value){null!==value&&(value.error&&value.error.message?validator.updateField({name:name,value:value,valid:!1,error:value.error.message}):value.complete&&validator.updateField({name:name,value:value,valid:!0}))},[name,validator]),tooltipParentRef=Object(react.useRef)(null);return react_default.a.createElement(fields_Field,{fieldType:"stripe",tooltipParentRef:tooltipParentRef,name:name,tooltip:tooltip,required:required,label:label,className:className},react_default.a.createElement(StripeElementComponent,Object(objectSpread.a)({},childProps,{ref:function stripeElementRef(el){el&&(tooltipParentRef.current=el._ref)},onChange:onChange})))},fields_Checkbox=function Checkbox(props){var name=props.name,label=props.label,_props$required3=props.required,required=void 0!==_props$required3&&_props$required3,_props$className=props.className,className=void 0===_props$className?"input-row input-row--checkbox":_props$className,childProps=Object(objectWithoutProperties.a)(props,["name","label","required","className"]),validator=Object(react.useContext)(FormContext).validator,onChange=Object(react.useCallback)(function(ev){var value=ev.target.checked;required&&!value?validator.updateField({name:name,value:value,valid:!1}):validator.updateField({name:name,value:value,valid:!0})},[name,validator]);return react_default.a.createElement(fields_Field,{fieldType:"input",name:name,className:className,required:required,tooltip:!1},react_default.a.createElement("input",Object(objectSpread.a)({},childProps,{type:"checkbox",name:name,onChange:onChange,onBlur:onChange})),react_default.a.createElement("span",{className:"label-text checkbox"},label))},fields_SubmitButton=function SubmitButton(props){var name=props.name,label=props.label,children=props.children,_props$className2=props.className,className=void 0===_props$className2?"button-row":_props$className2,childProps=Object(objectWithoutProperties.a)(props,["name","label","children","className"]),validator=Object(react.useContext)(FormContext).validator;return react_default.a.createElement(fields_Field,{fieldType:"input",name:name,label:label,className:className,tooltip:!1},react_default.a.createElement("button",Object(objectSpread.a)({},childProps,{type:"submit",name:name,disabled:!validator.allValid()}),children))},defineProperty=__webpack_require__(6),classCallCheck=__webpack_require__(76),createClass=__webpack_require__(270),slicedToArray=__webpack_require__(11),validator_Validator=function(){function Validator(state,dispatch){Object(classCallCheck.a)(this,Validator),this.state=void 0,this.dispatch=void 0,this.state=state,this.dispatch=dispatch}return Object(createClass.a)(Validator,[{key:"getValues",value:function getValues(){return Object.entries(this.state.fields).reduce(function(acc,_ref){var _ref2=Object(slicedToArray.a)(_ref,2),name=_ref2[0],field=_ref2[1];return Object(objectSpread.a)({},acc,Object(defineProperty.a)({},name,field.value))},{})}},{key:"allValid",value:function allValid(){return Object.values(this.state.fields).filter(function(field){return field.required}).every(function(field){return!0===field.valid})}},{key:"registerField",value:function registerField(_ref3){var name=_ref3.name,_ref3$initialValue=_ref3.initialValue,initialValue=void 0===_ref3$initialValue?null:_ref3$initialValue,fieldType=_ref3.fieldType,required=_ref3.required;this.dispatch({type:"registerField",name:name,initialValue:initialValue,fieldType:fieldType,required:required})}},{key:"updateField",value:function updateField(_ref4){var name=_ref4.name,value=_ref4.value,valid=_ref4.valid,_ref4$error=_ref4.error,error=void 0===_ref4$error?null:_ref4$error;return void 0===valid&&(valid=!!error),this.dispatch({type:"updateField",name:name,value:value,valid:valid,error:error})}},{key:"getFieldState",value:function getFieldState(fieldName){return this.state.fields[fieldName]}},{key:"getFieldProp",value:function getFieldProp(fieldName,propName,defVal){return fieldName in this.state.fields&&propName in this.state.fields[fieldName]&&null!==this.state.fields[fieldName][propName]?this.state.fields[fieldName][propName]:defVal}},{key:"getValue",value:function getValue(name,defVal){return this.getFieldProp(name,"value",defVal)}},{key:"isInvalid",value:function isInvalid(name){return!1===this.getFieldProp(name,"valid")}},{key:"getError",value:function getError(name){return this.getFieldProp(name,"error")}},{key:"getGlobalError",value:function getGlobalError(){return this.state.error}},{key:"setGlobalError",value:function setGlobalError(error){this.dispatch({type:"setGlobalError",error:error})}},{key:"resetGlobalError",value:function resetGlobalError(){this.dispatch({type:"resetGlobalError"})}}]),Validator}(),initialState={error:null,fields:{}},validator_mainReducer=function mainReducer(state,action){switch(action.type){case"registerField":var _name=action.name,fieldType=action.fieldType,required=action.required,_action$initialValue=action.initialValue,initialValue=void 0===_action$initialValue?null:_action$initialValue;return validator_setFieldState(state,_name,function(){return{fieldType:fieldType,required:required,value:initialValue,valid:null,error:null}});case"updateField":var _name2=action.name,value=action.value,valid=action.valid,error=action.error;return validator_setFieldState(state,_name2,function(field){return Object(objectSpread.a)({},field,{value:value,valid:valid,error:error})});case"setGlobalError":var _error=action.error;return Object(objectSpread.a)({},state,{error:_error});case"resetGlobalError":return Object(objectSpread.a)({},state,{error:null})}return state},validator_setFieldState=function setFieldState(state,name,fn){return Object(objectSpread.a)({},state,{fields:Object(objectSpread.a)({},state.fields,Object(defineProperty.a)({},name,fn(state.fields[name])))})},STRIPE_ELEMENT_STYLES=(__webpack_require__(586),{base:{fontFamily:'system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif',fontSize:"16px",lineHeight:"48px"}}),InjectedPaymentForm=Object(es.injectStripe)(function PaymentForm(_ref){var onPayment=_ref.onPayment,onPaymentError=_ref.onPaymentError,stripe=_ref.stripe,validator=function useValidatorState(){var _useReducer=Object(react.useReducer)(validator_mainReducer,initialState),_useReducer2=Object(slicedToArray.a)(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];return Object(react.useMemo)(function(){return new validator_Validator(state,dispatch)},[state,dispatch])}(),onSubmit=Object(react.useCallback)(function(ev){if(ev.preventDefault(),validator.allValid()){var _validator$getValues=validator.getValues(),name=_validator$getValues.name,zip=_validator$getValues.zip;stripe&&stripe.createToken({name:name,address_zip:zip}).then(onPayment).catch(onPaymentError)}},[validator,onPayment,onPaymentError,stripe]);return react_default.a.createElement(fields_Form,{"data-testid":"paymentForm",validator:validator,onSubmit:onSubmit,className:"payment"},react_default.a.createElement("h3",null,react_default.a.createElement("span",null,"Billing information")),react_default.a.createElement(fields_Input,{type:"text",name:"name",label:"Name as it appears on your card","data-testid":"name",required:!0,autoFocus:!0,spellCheck:!1,onValidate:function onValidate(value){var error=null;return null===value||value||(error="Please enter your name"),{value:value,error:error}}}),react_default.a.createElement(fields_FieldGroup,null,react_default.a.createElement(fields_StripeElement,{component:es.CardNumberElement,name:"creditCardNumber",label:"Credit Card Number",style:STRIPE_ELEMENT_STYLES,className:"input-row input-row--xl",required:!0}),react_default.a.createElement(fields_StripeElement,{component:es.CardExpiryElement,name:"expDate",label:"Exp. Date",style:STRIPE_ELEMENT_STYLES,required:!0}),react_default.a.createElement(fields_StripeElement,{component:es.CardCVCElement,name:"cvc",label:"CVC",style:STRIPE_ELEMENT_STYLES,required:!0}),react_default.a.createElement(fields_Input,{type:"number",name:"zip",label:"Zip Code",maxLength:5,required:!0,"data-testid":"zip",onValidate:function onValidate(value){var error=null;return null!==value&&((value=(""+value).substr(0,5))||(error="Zip code is required"),5!==value.length&&(error="Zip code is too short")),{value:value,error:error}}})),react_default.a.createElement(fields_Checkbox,{name:"confirm",required:!0,label:"\n        I authorize Mozilla, maker of Firefox products, to charge my\n        payment method [cost] per [time frame], according to payment\n        terms, until I cancel my subscription.\n      "}),react_default.a.createElement(fields_SubmitButton,{name:"submit"},"Submit"))});__webpack_exports__.a=function WrappedPaymentForm(props){return react_default.a.createElement(es.Elements,null,react_default.a.createElement(InjectedPaymentForm,props))}},280:function(module,exports,__webpack_require__){__webpack_require__(281),__webpack_require__(383),module.exports=__webpack_require__(384)},35:function(module,__webpack_exports__,__webpack_require__){"use strict";var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),react_stripe_elements__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(14),_MockLoader__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(78),_src_lib_AppContext__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(75),defaultAppContextValue={accessToken:"at_12345",config:{},queryParams:{}},defaultStripeStubs=function defaultStripeStubs(stripe){return stripe.createToken=function(element){return Promise.resolve({token:{id:"asdf",object:"mock_object",client_ip:"123.123.123.123",created:Date.now(),livemode:!1,type:"card",used:!1}})},stripe};__webpack_exports__.a=function MockApp(_ref){var children=_ref.children,_ref$stripeApiKey=_ref.stripeApiKey,stripeApiKey=void 0===_ref$stripeApiKey?"8675309":_ref$stripeApiKey,_ref$applyStubsToStri=_ref.applyStubsToStripe,applyStubsToStripe=void 0===_ref$applyStubsToStri?defaultStripeStubs:_ref$applyStubsToStri,_ref$appContextValue=_ref.appContextValue,appContextValue=void 0===_ref$appContextValue?defaultAppContextValue:_ref$appContextValue,mockStripe=Object(react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function(){return applyStubsToStripe(window.Stripe(stripeApiKey))},[stripeApiKey,applyStubsToStripe]);return Object(react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function(){var el=document.documentElement;el.setAttribute("lang","en"),el.setAttribute("dir","ltr"),el.setAttribute("class","js no-touch no-reveal-pw getusermedia")},[]),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_stripe_elements__WEBPACK_IMPORTED_MODULE_1__.StripeProvider,{stripe:mockStripe},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_src_lib_AppContext__WEBPACK_IMPORTED_MODULE_3__.a.Provider,{value:appContextValue},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_MockLoader__WEBPACK_IMPORTED_MODULE_2__.a,null,children)))}},36:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",function(){return SignInLayout}),__webpack_require__.d(__webpack_exports__,"a",function(){return SettingsLayout});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),AppLayout=(__webpack_require__(563),function AppLayout(_ref){var children=_ref.children;return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{id:"stage",className:"fade-in-forward",style:{opacity:1}},children))}),SignInLayout=function SignInLayout(_ref2){var children=_ref2.children;return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AppLayout,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{className:"sign-in"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{id:"main-content",className:"card payments-card"},children))),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{id:"static-footer"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("a",{id:"about-mozilla",rel:"author",target:"_blank",href:"https://www.mozilla.org/about/?utm_source=firefox-accounts&utm_medium=Referral"})))},SettingsLayout=function SettingsLayout(_ref3){var children=_ref3.children;return Object(react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function(){return document.body.classList.add("settings"),function(){return document.body.classList.remove("settings")}},[children]),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(AppLayout,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{className:"settings"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{id:"fxa-settings-header-wrapper"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("header",{id:"fxa-settings-header"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h1",{id:"fxa-manage-account"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span",{className:"fxa-account-title"},"Firefox Accounts")))),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{id:"fxa-settings"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{id:"fxa-settings-content",className:"card"},children)),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("footer",{id:"legal-footer"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("a",{className:"terms",href:"/legal/terms"},"Terms of Service"),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("a",{className:"privacy",href:"/legal/privacy"},"Privacy Notice"))))}},384:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _storybook_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9),reqFromComponents=(__webpack_require__(548),__webpack_require__(549),__webpack_require__(550),__webpack_require__(551)),reqFromRoutes=__webpack_require__(590);Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.configure)(function loadStories(){[reqFromComponents,reqFromRoutes].forEach(function(req){return req.keys().forEach(function(filename){return req(filename)})})},module)}.call(this,__webpack_require__(30)(module))},52:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return useBooleanState}),__webpack_require__.d(__webpack_exports__,"b",function(){return useCheckboxState}),__webpack_require__.d(__webpack_exports__,"c",function(){return useClickOutsideEffect});var _home_circleci_project_packages_fxa_payments_server_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(11),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0);function useBooleanState(){var defaultState=arguments.length>0&&void 0!==arguments[0]&&arguments[0],_useState=Object(react__WEBPACK_IMPORTED_MODULE_1__.useState)(defaultState),_useState2=Object(_home_circleci_project_packages_fxa_payments_server_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(_useState,2),state=_useState2[0],setState=_useState2[1];return[state,Object(react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(function(){return setState(!0)},[setState]),Object(react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(function(){return setState(!1)},[setState])]}function useCheckboxState(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var _useState3=Object(react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),_useState4=Object(_home_circleci_project_packages_fxa_payments_server_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(_useState3,2),state=_useState4[0],setState=_useState4[1];return[state,Object(react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(function(ev){return setState(ev.target.checked)},[setState])]}function useClickOutsideEffect(onClickOutside){var insideEl=Object(react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);return Object(react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(function(){var onBodyClick=function onBodyClick(ev){insideEl.current instanceof HTMLElement&&ev.target instanceof HTMLElement&&!insideEl.current.contains(ev.target)&&onClickOutside()};return document.body.addEventListener("click",onBodyClick),function(){return document.body.removeEventListener("click",onBodyClick)}},[onClickOutside]),insideEl}},548:function(module,exports,__webpack_require__){},549:function(module,exports,__webpack_require__){},550:function(module,exports,__webpack_require__){},551:function(module,exports,__webpack_require__){var map={"./AlertBar.stories.tsx":552,"./AppLayout/index.stories.tsx":555,"./DialogMessage.stories.tsx":564,"./LoadingOverlay.stories.tsx":579,"./PaymentForm/index.stories.tsx":585,"./ProductValueProposition/index.stories.tsx":587,"./Profile.stories.tsx":588,"./Tooltip.stories.tsx":589};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=551},552:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_storybook_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9),_AlertBar__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(97);Object(_storybook_react__WEBPACK_IMPORTED_MODULE_1__.storiesOf)("components/AlertBar",module).add("basic",function(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AlertBar__WEBPACK_IMPORTED_MODULE_2__.a,{className:"alert"},"This is an alert.")})}.call(this,__webpack_require__(30)(module))},553:function(module,exports,__webpack_require__){},554:function(module,exports,__webpack_require__){},555:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_storybook_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9),_storybook_components_MockApp__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(35),_index__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(36);Object(_storybook_react__WEBPACK_IMPORTED_MODULE_1__.storiesOf)("components/AppLayout",module).add("Settings layout",function(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_storybook_components_MockApp__WEBPACK_IMPORTED_MODULE_2__.a,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_index__WEBPACK_IMPORTED_MODULE_3__.a,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("p",{style:{padding:"0 2em 4em 2em"}},"App contents go here")))}).add("Sign-in layout",function(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_storybook_components_MockApp__WEBPACK_IMPORTED_MODULE_2__.a,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_index__WEBPACK_IMPORTED_MODULE_3__.b,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("p",null,"App contents go here")))})}.call(this,__webpack_require__(30)(module))},563:function(module,exports,__webpack_require__){},564:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_storybook_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9),_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(20),_DialogMessage__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(130);Object(_storybook_react__WEBPACK_IMPORTED_MODULE_1__.storiesOf)("components/DialogMessage",module).add("error",function(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_DialogMessage__WEBPACK_IMPORTED_MODULE_3__.a,{className:"error",onDismiss:Object(_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_2__.action)("dismiss")},"This is a dialog message")})}.call(this,__webpack_require__(30)(module))},578:function(module,exports,__webpack_require__){},579:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_storybook_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9),_LoadingOverlay__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(265);Object(_storybook_react__WEBPACK_IMPORTED_MODULE_1__.storiesOf)("components/LoadingOverlay",module).add("isLoading = true",function(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_LoadingOverlay__WEBPACK_IMPORTED_MODULE_2__.a,{isLoading:!0})})}.call(this,__webpack_require__(30)(module))},584:function(module,exports,__webpack_require__){},585:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_storybook_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9),_storybook_components_MockApp__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(35),_AppLayout__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(36),_index__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(277),_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(20);var Subject=function Subject(_ref){var _ref$onPayment=_ref.onPayment,onPayment=void 0===_ref$onPayment?Object(_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_5__.action)("onPayment"):_ref$onPayment,_ref$onPaymentError=_ref.onPaymentError,paymentFormProps={onPayment:onPayment,onPaymentError:void 0===_ref$onPaymentError?Object(_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_5__.action)("onPaymentError"):_ref$onPaymentError};return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MockPage,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_index__WEBPACK_IMPORTED_MODULE_4__.a,paymentFormProps))},MockPage=function MockPage(_ref2){var children=_ref2.children;return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_storybook_components_MockApp__WEBPACK_IMPORTED_MODULE_2__.a,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_AppLayout__WEBPACK_IMPORTED_MODULE_3__.b,null,children))};!function init(){Object(_storybook_react__WEBPACK_IMPORTED_MODULE_1__.storiesOf)("components/PaymentForm",module).add("default",function(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Subject,null)})}()}.call(this,__webpack_require__(30)(module))},586:function(module,exports,__webpack_require__){},587:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _home_circleci_project_packages_fxa_payments_server_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__),_storybook_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(9),_storybook_components_MockLoader__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(78),_index__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(80);var mockPlan={plan_id:"plan_123",plan_name:"Example Plan",product_id:"product_8675309",product_name:"Example Product",currency:"USD",amount:1099,interval:"month"};!function init(){Object(_storybook_react__WEBPACK_IMPORTED_MODULE_2__.storiesOf)("components/ProductValueProposition",module).add("default",function(){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_storybook_components_MockLoader__WEBPACK_IMPORTED_MODULE_3__.a,null,react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_index__WEBPACK_IMPORTED_MODULE_4__.a,{plan:mockPlan}))}).add("123doneProProduct",function(){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_storybook_components_MockLoader__WEBPACK_IMPORTED_MODULE_3__.a,null,react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_index__WEBPACK_IMPORTED_MODULE_4__.a,{plan:Object(_home_circleci_project_packages_fxa_payments_server_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__.a)({},mockPlan,{product_id:"123doneProProduct"})}))}).add("321doneProProduct",function(){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_storybook_components_MockLoader__WEBPACK_IMPORTED_MODULE_3__.a,null,react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_index__WEBPACK_IMPORTED_MODULE_4__.a,{plan:Object(_home_circleci_project_packages_fxa_payments_server_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__.a)({},mockPlan,{product_id:"321doneProProduct"})}))})}()}.call(this,__webpack_require__(30)(module))},588:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_storybook_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9),_Profile__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(271);var mockProfile={amrValues:["blah"],avatar:"http://example.com",avatarDefault:!1,displayName:"Foo Barson",email:"foo@example.com",locale:"en-US",twoFactorAuthentication:!1,uid:"8675309abcde"};!function init(){Object(_storybook_react__WEBPACK_IMPORTED_MODULE_1__.storiesOf)("components/Profile",module).add("with all profile data",function(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Profile__WEBPACK_IMPORTED_MODULE_2__.a,{profile:{error:null,loading:!1,result:mockProfile}})})}()}.call(this,__webpack_require__(30)(module))},589:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _home_circleci_project_packages_fxa_payments_server_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3),_home_circleci_project_packages_fxa_payments_server_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(11),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__),_storybook_react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(9),_storybook_components_MockApp__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(35),_lib_screen_info__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(272),_AppLayout__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(36),_Tooltip__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(133);var Field=function Field(_ref){var children=_ref.children,_ref$message=_ref.message,message=void 0===_ref$message?"Valid email required":_ref$message,_ref$showTooltip=_ref.showTooltip,showTooltip=void 0===_ref$showTooltip||_ref$showTooltip,_ref$dismissible=_ref.dismissible,dismissible=void 0!==_ref$dismissible&&_ref$dismissible,_ref$onDismiss=_ref.onDismiss,onDismiss=void 0===_ref$onDismiss?function(){}:_ref$onDismiss,_ref$onFocus=_ref.onFocus,onFocus=void 0===_ref$onFocus?function(){}:_ref$onFocus,_ref$showBelow=_ref.showBelow,showBelow=void 0===_ref$showBelow?void 0:_ref$showBelow,_ref$clientHeight=_ref.clientHeight,clientHeight=void 0===_ref$clientHeight?void 0:_ref$clientHeight,_ref$extraClassNames=_ref.extraClassNames,extraClassNames=void 0===_ref$extraClassNames?"tooltip-error":_ref$extraClassNames,screenInfo=new _lib_screen_info__WEBPACK_IMPORTED_MODULE_5__.a(window);void 0!==clientHeight&&(screenInfo.clientHeight=clientHeight);var parentRef=Object(react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div",{className:"input-row"},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("label",null,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("span",{className:"label-text"},children),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("input",{ref:parentRef,onFocus:onFocus,name:"name",type:"text",className:"name tooltip-below invalid",defaultValue:"",required:!0,autoFocus:!0,"aria-invalid":"true"}),showTooltip&&react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_Tooltip__WEBPACK_IMPORTED_MODULE_7__.a,{parentRef:parentRef,showBelow:showBelow,dismissible:dismissible,onDismiss:onDismiss,extraClassNames:extraClassNames,screenInfo:screenInfo},message)))},FieldWithDismissible=function FieldWithDismissible(props){var _useState=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)(!0),_useState2=Object(_home_circleci_project_packages_fxa_payments_server_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(_useState,2),showTooltip=_useState2[0],setShowTooltip=_useState2[1],onFocus=Object(react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(function(){return setShowTooltip(!0)},[setShowTooltip]),onDismiss=Object(react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(function(ev){ev.preventDefault(),setShowTooltip(!1)},[setShowTooltip]);return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(Field,Object(_home_circleci_project_packages_fxa_payments_server_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__.a)({},props,{showTooltip:showTooltip,onFocus:onFocus,onDismiss:onDismiss}))},MockPage=function MockPage(_ref2){var children=_ref2.children;return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_storybook_components_MockApp__WEBPACK_IMPORTED_MODULE_4__.a,null,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_AppLayout__WEBPACK_IMPORTED_MODULE_6__.b,null,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("form",{className:"payment"},children)))};!function init(){Object(_storybook_react__WEBPACK_IMPORTED_MODULE_3__.storiesOf)("components/Tooltip",module).add("default",function(){return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(MockPage,null,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(Field,null,"default"))}).add("dismissible",function(){return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(MockPage,null,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(FieldWithDismissible,{message:react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_2___default.a.Fragment,null,"Did you mean ",react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("a",{href:"https://mozilla.org"},"mozilla.org"),"?"),extraClassNames:"tooltip-error tooltip-suggest",dismissible:!0},"dismissible = true"))}).add("showBelow",function(){return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(MockPage,null,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(Field,{showBelow:!1},"showBelow = false"),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(Field,{showBelow:!0},"showBelow default"),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(Field,{showBelow:!0},"showBelow = true"))}).add("clientHeight",function(){return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(MockPage,null,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(Field,{clientHeight:300},"clientHeight = 300"),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(Field,{showBelow:!1,clientHeight:300},"clientHeight = 300, showBelow = false"),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(Field,{clientHeight:1e3},"clientHeight = 1000"))})}()}.call(this,__webpack_require__(30)(module))},590:function(module,exports,__webpack_require__){var map={"./Product.stories.tsx":591,"./Subscriptions/index.stories.tsx":593};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=590},591:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_storybook_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9),_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(20),_storybook_components_MockApp__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(35),_components_AppLayout__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(36),_Product__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(273);var PLANS=[{plan_id:"plan_123",plan_name:"Example Plan",product_id:"product_8675309",product_name:"Example Product",currency:"USD",amount:1099,interval:"month"}],mockProps={match:{params:{productId:"product_8675309"}},plans:{error:null,loading:!1,result:PLANS},createSubscriptionStatus:{error:null,loading:!1,result:null},subscriptions:{error:null,loading:!1,result:null},plansByProductId:function plansByProductId(_){return PLANS},createSubscription:Object(_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_2__.action)("createSubscription"),resetCreateSubscription:Object(_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_2__.action)("resetCreateSubscription"),fetchPlansAndSubscriptions:Object(_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_2__.action)("fetchPlansAndSubscriptions")};!function init(){Object(_storybook_react__WEBPACK_IMPORTED_MODULE_1__.storiesOf)("routes/Product",module).add("basic",function(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_storybook_components_MockApp__WEBPACK_IMPORTED_MODULE_3__.a,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_AppLayout__WEBPACK_IMPORTED_MODULE_4__.b,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Product__WEBPACK_IMPORTED_MODULE_5__.a,mockProps)))})}()}.call(this,__webpack_require__(30)(module))},593:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _home_circleci_project_packages_fxa_payments_server_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__),_storybook_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(9),_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(20),_storybook_components_MockApp__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(35),_components_AppLayout__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(36),_index__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(276);var baseProps={customer:{error:null,loading:!1,result:null},subscriptions:{error:null,loading:!1,result:null},customerSubscriptions:[],fetchCustomerAndSubscriptions:Object(_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_3__.action)("fetchCustomerAndSubscriptions"),cancelSubscription:Object(_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_3__.action)("cancelSubscription"),resetUpdatePayment:Object(_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_3__.action)("resetUpdatePayment"),resetCancelSubscription:Object(_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_3__.action)("resetCancelSubscription"),updatePayment:Object(_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_3__.action)("updatePayment"),updatePaymentStatus:{error:null,loading:!1,result:null}},subscribedProps=Object(_home_circleci_project_packages_fxa_payments_server_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__.a)({},baseProps,{customer:{loading:!1,error:null,result:{payment_type:"card",last4:"8675",exp_month:"12",exp_year:"2028",subscriptions:[]}},customerSubscriptions:[{current_period_end:""+(Date.now()+86400),current_period_start:""+(Date.now()-86400),ended_at:null,nickname:"Example Plan",plan_id:"plan_8675309",status:"active",subscription_id:"sub_5551212"}],subscriptions:{loading:!1,error:null,result:[{subscriptionId:"sub_5551212",productName:"product_123",createdAt:Date.now(),cancelledAt:null}]}});!function init(){var RouteWrapper=function RouteWrapper(props){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_storybook_components_MockApp__WEBPACK_IMPORTED_MODULE_4__.a,null,react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_components_AppLayout__WEBPACK_IMPORTED_MODULE_5__.a,null,react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_index__WEBPACK_IMPORTED_MODULE_6__.a,props)))};Object(_storybook_react__WEBPACK_IMPORTED_MODULE_2__.storiesOf)("routes/Subscriptions",module).add("blank slate",function(){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(RouteWrapper,baseProps)}).add("loading",function(){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(RouteWrapper,Object(_home_circleci_project_packages_fxa_payments_server_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__.a)({},baseProps,{subscriptions:{loading:!0,error:!1,result:null}}))}).add("error",function(){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(RouteWrapper,Object(_home_circleci_project_packages_fxa_payments_server_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__.a)({},baseProps,{subscriptions:{loading:!1,error:{message:"network error"},result:null}}))}).add("subscribed",function(){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(RouteWrapper,subscribedProps)})}()}.call(this,__webpack_require__(30)(module))},75:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return AppContext});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),AppContext=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__).a.createContext({accessToken:"",config:{},queryParams:{}})},78:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return MockLoader});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),MockLoader=function MockLoader(_ref){var children=_ref.children;return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Suspense,{fallback:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",null,"Loading")},children)}},80:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return ProductValueProposition});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),availableDetails={"123doneProProduct":react__WEBPACK_IMPORTED_MODULE_0___default.a.lazy(function(){return __webpack_require__.e(3).then(__webpack_require__.bind(null,595))}),"321doneProProduct":react__WEBPACK_IMPORTED_MODULE_0___default.a.lazy(function(){return __webpack_require__.e(4).then(__webpack_require__.bind(null,596))})},DefaultDetails=function DefaultDetails(plan){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("pre",null,JSON.stringify(plan,null," "))},ProductValueProposition=function ProductValueProposition(_ref){var plan=_ref.plan,Details=plan.product_id in availableDetails?availableDetails[plan.product_id]:DefaultDetails,currency=plan.currency,amount=plan.amount,interval=plan.interval,plan_name=plan.plan_name;return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{className:"productDetails"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("p",null,"For ",currency," ",amount," per ",interval,", your ",plan_name," includes:"),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Details,{plan:plan}))};__webpack_exports__.b=ProductValueProposition},97:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return AlertBar});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_Portal__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__(553),__webpack_require__(129)),AlertBar=function AlertBar(_ref){var children=_ref.children,_ref$className=_ref.className,className=void 0===_ref$className?"alert":_ref$className;return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Portal__WEBPACK_IMPORTED_MODULE_2__.a,{id:"top-bar"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{className:className},children))};__webpack_exports__.b=AlertBar}},[[280,1,2]]]);
//# sourceMappingURL=main.27b80b35af3e37ba87c2.bundle.js.map